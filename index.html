<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <!--<link rel="stylesheet" type="text/css" href="normalize.css" media="screen" />-->
        <!--http://getskeleton.com/ -->
        <link rel="stylesheet" type="text/css" href="skeleton.css" media="screen" />
        <!--http://sixrevisions.com/css/fixed-navigation-bar/ -->
        <!-- for navbar on bottom use z-index: 9999; -->
        <!-- http://www.seriouspizza.com/ -->
        <script src="./modernizr.custom.js"></script>
        <link rel="stylesheet" type="text/css" href="./ns-default.css"/>
        <link rel="stylesheet" type="text/css" href="./custom.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="./ns-style-other.css" />
        <script src="https://use.fontawesome.com/7592d3539c.js"></script>
    </head>
    <body>
        <section id="quizWrapper">
            <div class="container">
            <section id="QuizQuestions">

            </section>
            <button id='btnPrevious' onclick="quizIteratorValidator(-1);">Previous Question</button>
            <button id='btnSubmit' onclick="validateAndSubmit();" class="button-primary">Submit</button>
            <button id='btnNext' onclick="quizIteratorValidator(1);">Next Question</button>
            </div>
        </section>
        <h3>SpanishClep.com</h3>
        <a href="mailto:spanishclep@gmail.com?subject=Test%20Email&body=This%20is%20an%20email%20that%20had%20the%20subject,%20message,%20and%20bcc%20filled%20in%20automatically%20by%20clicking%20the%20email%20on%20the%20website&bcc=provenhypothesis@gmail.com">spanishclep@gmail.com</a>
        <a href="tel://1-512-626-4397">+1 (512) 626-4397</a>
        <ul class="sidebar">
            <li><strong>Material:</strong></li>
            <li>Ser vs. Estar</li>
            <li>Preterite vs. Imperfect</li>
            <li>Subjunctive vs. Indicative</li>
            <li>Total Verbs</li>
            <li>Other grammar topics</li>
            <li>Vocabulary I</li>
            <li>Vocabulary II</li>
            <li>Lectura I</li>
            <li>Lectura II</li>
        </ul>
        <h3>What can you expect from our material?</h3>
        <p> Do you want to take the Spanish Clep Exam? Do you have doubts about being

prepared for the exam? By completing our guide you will be able to test yourself. Our

grading system has been tested with hundreds of students and we predict the following:

90% and above: you are in very good shape. You will probably get the maximum

credits.</p>
<ul class="expectations">

<li><em>80%-90%:</em> you will probably get around 10 credits.</li>

<li><em>70% - 80%:</em> you are going to get the minimum credits.</li>

<li><em>Less than 70%:</em> you should get more training.</li>

</ul>
<h3>PROCESS:</h3>
<ul class="process">
<li> Purchase the material</li>

<li> Provide your email so that we can send you the material</li>

<li> The material will be sent within 24 hours</li>

<li> Open the file and write your email (first question) so that the results

can be sent to you immediately</li>

<li>Check your email to view your grades</li>
</ul>
<p>NOTE: You can work on the material by using your smart phone, iPad,

computer, laptop, or tablet.</p>
<script src="./classie.js"></script>
<script src="./notificationFx.js"></script>
<script>
    var iJson;
    var json = {"questions":[
    {
        //"question" : "1. ¿__________ es la capital de Texas?", "answer1" : "Qué", "answer2" : "Cuál","answer3" : "Quién", "answer4": "Que"
        "question" : "¿__________ es la capital de Texas?", "wrong" : ["Quién","Que","Qué"], "right":"Cuál" 
    },
    {
        //"question" : "2. ____________ (my) libro está sobre la mesa. Tu libro está debajo de la mesa.", "answer1" : "tu", "answer2" : "tú","answer3" : "mi", "answer4": "sus"
        "question" : "____________ (my) libro está sobre la mesa. Tu libro está debajo de la mesa.", "wrong" : ["tu" ,"tú", "sus"], "right" : "mi"
    },
    {
        //"question" :"3. Nueva York es una ciudad ______________.", "answer1" : "norteamericanos", "answer2" : "norteamericano","answer3" : "norteamericana", "answer4": "norteamericanas"
        "question" :"Nueva York es una ciudad ______________.", "wrong" : [ "norteamericanos", "norteamericano","norteamericanas"], "right" : "norteamericana"
    },
    {
        //"question" :"4. Los estudiantes _______________  en la biblioteca.", "answer1" : "estudian", "answer2" : "estudien","answer3" : "estudiando", "answer4": "estudio"
        "question" :"Los estudiantes _______________  en la biblioteca.", "wrong": ["estudien","estudiando","estudio"], "right" : "estudian"
    },
    {
        //"question" : "5. ____________ (this) libro es de mi sobrino.", "answer1" : "Ese", "answer2" : "Estos","answer3" : "Estas", "answer4": "Este"
        "question" : " ____________ (this) libro es de mi sobrino.", "wrong": ["Ese", "Estos","Estas"], "right" : "Este"
    },
    {
        //"question" : "6. Los profesores ________________ tomar vacaciones durante el verano.", "answer1" : "quiere", "answer2" : "quiero","answer3" : "quieren", "answer4": "quieres"
        "question" : "Los profesores ________________ tomar vacaciones durante el verano.","wrong": ["quiere","quiero","quieres"], "right" : "quieren"
    },
    {
        //"question" : "7. Este fin de semana nosotros ____________ a Houston.", "answer1" : "voy a ir", "answer2" : "vamos a irnos","answer3" : "vamos a ir", "answer4": "van a ir"
        "question" : "Este fin de semana nosotros ____________ a Houston.","wrong": ["voy a ir","vamos a irnos","van a ir"], "right" : "vamos a ir"
    },
    {
        //"question" : "8. Mis hermanos ______________ todos los días antes de ir a la escuela.", "answer1" : "se bañan", "answer2" : "nos bañamos","answer3" : "bañan", "answer4": "bañamos"
        "question" : "Mis hermanos ______________ todos los días antes de ir a la escuela.", "wrong": ["nos bañamos", "bañan","bañamos"], "right" : "se bañan"
    },
    {
        //"question" : "9. Mi hermano _________________ una persona agradable. Pero hoy está enojado.", "answer1" : "es", "answer2" : "está","answer3" : "soy", "answer4": "estoy"
        "question" : "Mi hermano _________________ una persona agradable. Pero hoy está enojado.", "wrong": [ "está", "soy","estoy"], "right" : "es"
    },
    {
        //"question" : "10. El partido de béisbol es en Dallas.  Dallas _________ en Texas.", "answer1" : "es", "answer2" : "está","answer3" : "soy", "answer4": "estoy"
        "question" : "El partido de béisbol es en Dallas.  Dallas _________ en Texas.","wrong": ["es","soy","estoy"], "right" : "está"
    },
    {
        //"question" : "11. El verano en Texas es ___________________ en Nueva York.", "answer1" : "menos caliente", "answer2" : "más caliente que","answer3" : "tan caliente", "answer4": "tanto caliente"
        "question" : "El verano en Texas es ___________________ en Nueva York.","wrong": ["menos caliente","tan caliente", "tanto caliente"], "right" : "más caliente que"
    },
    {
        //"question" : "12. Jupiter _______ el planeta __________ grande de nuestro sistema solar.", "answer1" : "es, más", "answer2" : "es, tanto","answer3" : "es, tan", "answer4": "es, tanto"
        "question" : "Jupiter _______ el planeta __________ grande de nuestro sistema solar.","wrong": ["es, tanto","es, tan","es, tanto"], "right" : "es, más"
    },
    {
        //"question" : "13. Quiero comprar flores para mi madre.  Quiero ______________.", "answer1" : "comprárselas", "answer2" : "compráselos","answer3" : "se los comprar", "answer4": "se los compro"
        "question" : "Quiero comprar flores para mi madre.  Quiero ______________.","wrong": ["compráselos","se los comprar", "se los compro"], "right" : "comprárselas"
    },
    {
        //"question" : "14. A Rolando ______  __________ nadar en el mar.", "answer1" : "se, gusta", "answer2" : "le, gustan","answer3" : "le, gusta", "answer4": "le, gustar"
        "question" : "A Rolando ______  __________ nadar en el mar.","wrong": ["se, gusta","le, gustan","le, gustar"], "right" : "le, gusta"
    },
    {
        //"question" : "15. Anoche yo __________(ir) de compras porque necesitaba comprar un par de zapatos.", "answer1" : "fui", "answer2" : "fue","answer3" : "iré", "answer4": "voy"
        "question" : "Anoche yo __________(ir) de compras porque necesitaba comprar un par de zapatos.","wrong": ["fue","iré","voy"], "right" : "fui"
    },
    {
        //"question" : "16. Quiero que Ud _________el periódico.", "answer1" : "lea", "answer2" : "lees","answer3" : "leo", "answer4": "leí"
        "question" : "Quiero que Ud _________el periódico.","wrong": ["lees","leo","leí"], "right" : "lea"
    },
    {
        //"question" : "17. Busco un restaurante que ________________ comida china.", "answer1" : "sirva", "answer2" : "sirve","answer3" : "sirvió", "answer4": "servía"
        "question" : "Busco un restaurante que ________________ comida china.","wrong": ["sirve","sirvió","servía"], "right" : "sirva"
    },
    {
        //"question" : "18. A nosotros nos molesta que Sofía no _________ saludablemente.", "answer1" : "comer", "answer2" : "comerá","answer3" : "comiera", "answer4": "coma"
        "question" : "A nosotros nos molesta que Sofía no _________ saludablemente.","wrong": ["comer", "comerá", "comiera"], "right" : "coma"   
    },
    {
        //"question" : "19. Todos los veranos, nosotros _____________ a las montañas.", "answer1" : "fuimos", "answer2" : "íbamos","answer3" : "fueron", "answer4": "iban"
        "question" : "Todos los veranos, nosotros _____________ a las montañas.","wrong": ["fuimos","fueron","iban"], "right" : "íbamos"     
    },
    {
        //"question" : "20. Yo __________(conducir) rápidamente cuando el policía me __________(detener).", "answer1" : "conducía, detuvo", "answer2" : "conduciendo, detenía","answer3" : "conducir, detuvo", "answer4": "conduje, detener"
        "question" : "Yo __________(conducir) rápidamente cuando el policía me __________(detener).", "wrong": ["conduciendo, detenía","conducir, detuvo","conduje, detener"], "right" : "conducía, detuvo"      
    },
    {
        //"question" : "21. Es necesario escribir una carta para el director. La carta ya ______________________.", "answer1" : "es escrita", "answer2" : "haya escrita","answer3" : "está escrito", "answer4": "está escrita"
        "question" : "Es necesario escribir una carta para el director. La carta ya ______________________.","wrong":["es escrita","haya escrita","está escrito"], "right" : "está escrita"
    },
    {
        //"question" : "22. Mañana ______________ de compras.", "answer1" : "iré", "answer2" : "fui","answer3" : "iba", "answer4": "fue"
        "question" : "Mañana ______________ de compras.","wrong": ["fui","iba","fue"], "right" : "iré"      
    },
    {
        //"question" : "23. Iré al cine tan pronto como _____________ mi tarea.", "answer1" : "haga", "answer2" : "hice","answer3" : "haré", "answer4": "hago"
        "question" : "Iré al cine tan pronto como _____________ mi tarea.","wrong": ["hice","haré","hago"], "right" : "haga"        
    },
    {
        //"question" : "24. Dudaba que Joaquín_________ a Europa.", "answer1" : "vaya", "answer2" : "fuera","answer3" : "irá", "answer4": "ir"
        "question" : "Dudaba que Joaquín_________ a Europa.","wrong":["vaya","irá","ir"], "right" : "fuera"
    },
    {
        //"question" : "25. __________ un coche, si _____________uno.", "answer1" : "Compraría, necesito", "answer2" : "Compraría, necesitaré","answer3" : "Compraría, necesitara", "answer4": "Compraré, necesitaré"
        "question" : "__________ un coche, si _____________uno.", "wrong": ["Compraría, necesito","Compraría, necesitaré","Compraré, necesitaré"], "right" : "Compraría, necesitara"       
    }
        ]
    };
    /*the quiz section*/
    var quiz = document.getElementById("QuizQuestions");
    /*create answer key */
    var quizOrder = [];
    var choiceOrder = [];
    var answerKey=[];
    var selectedAnswers=[];
    /*in case the quiz is modified, I'm not going to assume the quiz is 25 questions.*/
    var quizLength = json.questions.length;
    /*variable to control the displayed question*/
    var quizIterator = 0;
    function generateQuiz(){
        
        while(answerKey.length){
            answerKey.pop();
        }
        /*reset selection. According to: https://jsperf.com/zeroarrayjs , this was the fastest way*/
        let empty = 0;
        let tempI = 0;
        while(tempI < quizLength){
            selectedAnswers[tempI++] = empty;
        }
        while(quizOrder.length < quizLength){
            let selectedQuestion = Math.floor(Math.random()*quizLength);
            if(quizOrder.indexOf(selectedQuestion) > -1) continue;
            quizOrder[quizOrder.length] = selectedQuestion
        }
        while(choiceOrder.length < quizOrder.length){
            let choices = [1,2,3,4];
            let tempArray = [];
            for (let i = choices.length - 1; i > 0; i--){
                var j = Math.floor(Math.random() * (i + 1));
                var temp = choices[i];
                choices[i] = choices[j];
                choices[j] = temp;
            }
            /*assuming each question only has 4 choices*/
            if(choices.length >= 3){
            choiceOrder.push(choices);
            }
        }
        for(var i in choiceOrder){
            answerKey.push(choiceOrder[i].indexOf(4))
            }
        }
    function quizIteratorValidator(int){
        quizIterator += int;
        if (quizIterator < 0){
            document.getElementById("btnPrevious").style.visibility  = 'hidden';
            quizIterator = 0;
        } else if ( quizIterator > quizOrder.length ){
            document.getElementById("btnNext").style.visibility  = 'hidden';
            document.getElementById("btnSubmit").style.visibility="visible";
            quizIterator = quizLength -1;
        } else if (quizIterator == quizOrder.length - 1){
            document.getElementById("btnNext").style.visibility  = 'hidden';
            document.getElementById("btnSubmit").style.visibility="visible";
            updateQuestion(quizIterator);
        }
        else {
            document.getElementById("btnPrevious").style.visibility = "visible";
            document.getElementById("btnNext").style.visibility = "visible";
            document.getElementById("btnSubmit").style.visibility="hidden";
            updateQuestion(quizIterator);
        }
    }
function choseAnswer(int){
    selectedAnswers[quizIterator] = int;
}    
    function updateQuestion(int){
            quiz.innerHTML = "<strong>" + (quizIterator + 1).toString() + ". " + json.questions[quizOrder[quizIterator]].question + "</strong>></br>";
            let questionCurrent = json.questions[quizIterator];
            let choiceList = document.createElement("form");
            choiceList.setAttribute("id", "listOfChoices");
            /*choiceList.setAttribute("action","javascript:postAnswer(" + quizIterator +");")*/
            quiz.appendChild(choiceList);
            for (let i in choiceOrder[quizIterator]){
                let skeletonRow = document.createElement("div");
                skeletonRow.setAttribute("class", "row u-full-width");
                let labelNode = document.createElement("label");
                let node = document.createElement("input");
                node.setAttribute("type","radio");
                node.setAttribute("name", "Q" + quizIterator);
                switch(choiceOrder[quizIterator][i]){
                    case 1:
                        node.setAttribute("value", 1);
                        labelNode.setAttribute("onClick","choseAnswer(1)");
                        if (selectedAnswers[quizIterator] == 1){ node.checked = true;}
                        labelNode.innerText = questionCurrent.wrong[0];
                        break;
                    case 2:
                        node.setAttribute("value", 2);
                        labelNode.setAttribute("onClick","choseAnswer(2)");
                        if (selectedAnswers[quizIterator] == 2){ node.checked = true;}
                        labelNode.innerText = questionCurrent.wrong[1];
                        break;
                    case 3:
                        node.setAttribute("value", 3);
                        labelNode.setAttribute("onClick","choseAnswer(3)");
                        if (selectedAnswers[quizIterator] == 3){ node.checked = true;}
                        labelNode.innerText = questionCurrent.wrong[2];
                        break;
                    case 4:
                        node.setAttribute("value", 4);
                        labelNode.setAttribute("onClick","choseAnswer(4)");
                        if (selectedAnswers[quizIterator] == 4){ node.checked = true;}
                        labelNode.innerText = questionCurrent.right;
                        break;
                    default:
                        let notification = new NotificationFx({
                            wrapper : document.body,
                            message : '<div class="ns-thumb"><img class="u-max-full-width"src="http://placehold.it/62"></div><div class="ns-content"><p>oh dear</p></div>',
                            layout : 'other',
                            effect: 'thumbslider',
                            type: 'error',
                            ttl: 5000,
                            onClose: function() {return false;},
                            onOpen: function() {return false;}
                        });
                        notification.show();
                        console.log("oh dear " + i);
                }
                choiceList.appendChild(skeletonRow);
                skeletonRow.appendChild(labelNode);
                labelNode.appendChild(node);
            }
            /*for ( let i in choiceOrder[quizIterator]){
                let sectionNode = document.createElement("section");
                sectionNode.setAttribute("class", "choiceSection")
                let node = document.createElement("input");
                node.setAttribute("type", "radio");
                node.setAttribute("name", "Q" + quizIterator);
                let labelNode = document.createElement("label");
                switch(choiceOrder[quizIterator][i]){ 
                    case 1:
                        //node.setAttribute("type", "radio");
                        node.setAttribute("id", quizIterator.toString() + choiceOrder[quizIterator][i]);
                        node.setAttribute("value", 1);
                        node.setAttribute("onClick","choseAnswer(1)");
                        labelNode.setAttribute("for",choiceOrder[quizIterator][i]);
                        labelNode.innerHTML = questionCurrent.wrong[0];
                        if (selectedAnswers[quizIterator] == 1){ node.checked = true;}
                        break;
                    case 2:
                        //node.innerText = questionCurrent.wrong[1];
                        node.setAttribute("id", quizIterator.toString() + choiceOrder[quizIterator][i]);
                        node.setAttribute("value", 2);
                        node.setAttribute("onClick","choseAnswer(2)");
                        labelNode.setAttribute("for",quizIterator.toString() + choiceOrder[quizIterator][i]);
                        labelNode.innerHTML = questionCurrent.wrong[1];
                        if (selectedAnswers[quizIterator] == 2){ node.checked = true;}
                        break;
                    case 3:
                        //node.innerText = questionCurrent.wrong[2];
                        node.setAttribute("id", quizIterator.toString() + choiceOrder[quizIterator][i]);
                        node.setAttribute("value", 3);
                        node.setAttribute("onClick","choseAnswer(3)");
                        labelNode.setAttribute("for",choiceOrder[quizIterator][i]);
                        labelNode.innerHTML = questionCurrent.wrong[2];
                        if (selectedAnswers[quizIterator] == 3){ node.checked = true;}
                        break;
                    case 4:
                        //node.innerText = questionCurrent.right;
                        node.setAttribute("id", quizIterator.toString() + choiceOrder[quizIterator][i]);
                        node.setAttribute("value", 4);
                        node.setAttribute("onClick","choseAnswer(4)");
                        labelNode.setAttribute("for",choiceOrder[quizIterator][i]);
                        labelNode.innerHTML = questionCurrent.right;
                        if (selectedAnswers[quizIterator] == 4){ node.checked = true;}
                        break;
                    default:
                        let notification = new NotificationFx({
                            wrapper : document.body,
                            message : '<div class="ns-thumb"><img src="http://placehold.it/62"></div><div class="ns-content"><p>oh dear</p></div>',
                            layout : 'other',
                            effect: 'thumbslider',
                            type: 'error',
                            ttl: 500,
                            onClose: function() {return false;},
                            onOpen: function() {return false;}
                        });
                        notification.show();
                        console.log("oh dear " + i);
            }
            choiceList.appendChild(sectionNode);
            sectionNode.appendChild(node);
            sectionNode.appendChild(labelNode);
            }*/
        }
    function validateAndSubmit(){
        if (selectedAnswers.includes(0)){
            let notification = new NotificationFx({
                    wrapper : document.body,
                    message : '<div class="ns-thumb"><img class="u-max-full-width" src="./!.png"></div><div class="ns-content"><p>Not all questions are answered</p></div>',
                    layout : 'other',
                    effect: 'thumbslider',
                    type: 'error',
                    ttl: 6000,
                    onClose: function() {return false;},
                    onOpen: function() {return false;}
                });
            notification.show();
            console.log("quiz not complete");
        } else{
            let rightAnswers = selectedAnswers.reduce(function(n,val){ return n + (val === 4);},0);
            let notification = new NotificationFx({
                    wrapper : document.body,
                    message : '<div class="ns-thumb"><i style ="color:#33C3F0;" class="fa fa-hand-o-right fa-3x" aria-hidden="true"></i></div><div class="ns-content"><p>you got a ' + (rightAnswers/quizLength * 100) + '% grade</p></div>',
                    layout : 'other',
                    effect: 'thumbslider',
                    type: 'error',
                    ttl: 9000,
                    onClose: function() {return false;},
                    onOpen: function() {return false;}
                });
            notification.show();
            console.log("you got a " + (rightAnswers/quizLength * 100));
        }
    }

    /*function updateQuestion(int){
        var quiz = document.getElementById("quiz");
        quiz.innerHTML = "<h1>"+ json.questions[int].question + "</h1><br>";
        var AnswerList = document.createElement("ul");
        AnswerList.setAttribute("id", "listOfAnswers");
        quiz.appendChild(AnswerList);
        for (var i in json.questions[int].wrong){
            var answerArray = json.questions[int].wrong;
            var node = document.createElement("li");
            node.innerHTML = answerArray[i];
            AnswerList.appendChild(node);
        }
    }*/
    generateQuiz();
    //updateQuestion(quizIterator);
    quizIteratorValidator(0);
                let notification = new NotificationFx({
                    wrapper : document.body,
                    message : '<div class="ns-thumb"><i style ="color:#33C3F0;" class="fa fa-hand-o-right fa-3x" aria-hidden="true"></i></div><div class="ns-content"><p>you got a 0% grade</p></div>',
                    layout : 'other',
                    effect: 'thumbslider',
                    type: 'error',
                    ttl: 9000,
                    onClose: function() {return false;},
                    onOpen: function() {return false;}
                });
            notification.show();
    /*temporary function to display all the questions*/
    /*commenting out because I no longer need this.*/
    /*function displayAllQuestions(){
        var quiz = document.getElementById("quiz");
        /*Let q stand for the question*/
        /*var qList = document.createElement("ol");
        qList.setAttribute("id","questionList");
        quiz.appendChild(qList);
        var qName = 1;*/
        /*this outer loop will print all the questions*/
/*        for (var q in json.questions){
            var qNode = document.createElement("li");
            qNode.setAttribute("id","q" + qName.toString());
            qNode.innerHTML = json.questions[q].question;
            qList.appendChild(qNode);*/
            /*following the advice here http://stackoverflow.com/questions/5899337/proper-way-to-make-html-nested-list, the questions will be
            wrapped with a li element. In case the link 404s, the code is added to the bottom of the file*/
           /*let w stand for wrapper*/
/*            var wNode = document.createElement("ol");
            wNode.setAttribute("id","w" + qName.toString());
            qNode.appendChild(wNode);*/
            /* let a stand for answer */
/*            for (a in json.questions[q].wrong){
                var aNode = document.createElement("li");
                aNode.style.listStyle = "lower-alpha";
                aNode.setAttribute("id", "q" + qName.toString() + "a" + (parseInt(a) + 1).toString());
                aNode.innerHTML = json.questions[q].wrong[a];
                wNode.appendChild(aNode);
            }
            qName++;
        }
    }
displayAllQuestions();*/
/*note to self
--in regards to the question list:
<ul>
    <li>List item one</li>
    <li>List item two with subitems:
        <ul>
            <li>Subitem 1</li>
            <li>Subitem 2</li>
        </ul>
    </li>
    <li>Final list item</li>
</ul>

*/
</script>
    </body>
</html> 