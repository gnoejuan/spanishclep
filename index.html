<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./vendor/css/normalize.css" media="screen" />
    <!--http://getskeleton.com/ -->
    <!--http://sixrevisions.com/css/fixed-navigation-bar/ -->
    <!-- for navbar on bottom use z-index: 9999; -->
    <!-- http://www.seriouspizza.com/ -->
    <script src="./js/modernizr.custom.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/ns-default.css"/>
    <link rel="stylesheet" type="text/css" href="./css/ns-style-other.css" />
    <!--<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css" media="screen" />-->
    <link rel="stylesheet" type="text/css" href="./vendor/css/skeleton.css" />
    <link rel="stylesheet" type="text/css" href="./css/custom.css" media="screen" />
    <script src="https://use.fontawesome.com/7592d3539c.js"></script>
    <script src="./js/quizReader.js"></script>
</head>
<body>
    <div class="container">
        <h1>SpanishClep.com</h1>
        <div class="row">
            <ul class="four columns">
                <a href="mailto:spanishclep@gmail.com?subject=Test%20Email&body=This%20is%20an%20email%20that%20had%20the%20subject,%20message,%20and%20bcc%20filled%20in%20automatically%20by%20clicking%20the%20email%20on%20the%20website&bcc=provenhypothesis@gmail.com"><i class="fa fa-envelope-o" style="margin-right:10px;" aria-hidden="true"></i>spanishclep@gmail.com</a>
                <br>
                <a href="tel://1-512-626-4397"><i style="margin-right:10px;" class="fa fa-volume-control-phone" aria-hidden="true"></i>+1 (512) 626-4397</a>
                <li>
                    <strong>Material:</strong>
                    <ul>
                        <li>Ser vs. Estar</li>
                        <li>Preterite vs. Imperfect</li>
                        <li>Subjunctive vs. Indicative</li>
                        <li>Total Verbs</li>
                        <li>Other grammar topics</li>
                        <li>Vocabulary I</li>
                        <li>Vocabulary II</li>
                        <li>Lectura I</li>
                        <li>Lectura II</li>
                    </ul>
                </li>
            </ul>
            <div class="eight columns">
                <h3>What can you expect from our material?</h3>
                <p> Do you want to take the Spanish Clep Exam? Do you have doubts about being prepared for the exam? By completing our guide you will be able to test yourself. Our grading system has been tested with hundreds of students and we predict the following: 90% and above: you are in very good shape. You will probably get the maximum credits.</p>
                <ul class="expectations">
                    <li><em>80%-90%:</em> you will probably get around 10 credits.</li>
                    <li><em>70% - 80%:</em> you are going to get the minimum credits.</li>
                    <li><em>Less than 70%:</em> you should get more training.</li>
                </ul>
                <button onclick="toggleQuiz();" class="button-primary"><i class="fa fa-check-square" aria-hidden="true"></i>Practice Quiz</button>
            </div>
        </div>
        <section style="display:none;" id="quizWrapper">
            <div class="container">
                <section id="QuizQuestions"></section>
                <button id='btnPrevious' style="visibility:hidden;" onclick="quizIteratorValidator(-1);">Previous Question</button>
                <button id='btnSubmit' style="visibility:hidden;" onclick="validateAndSubmit();" class="button-primary">Submit</button>
                <button id='btnNext' style="visibility:hidden;" onclick="quizIteratorValidator(1);">Next Question</button>
            </div>
        </section>
        <h5>PROCESS:</h5>
        <ul class="process">
            <li> Purchase the material</li>
            <li> Provide your email so that we can send you the material</li>
            <li> The material will be sent within 24 hours</li>
            <li> Open the file and write your email (first question) so that the results can be sent to you immediately</li>
            <li>Check your email to view your grades</li>
        </ul>
        <p>
            NOTE: You can work on the material by using your smart phone, iPad,

            computer, laptop, or tablet.
        </p>
    </div>
    <script src="./js/classie.js"></script>
    <script src="./js/notificationFx.js"></script>
    <script>
        var firstTime = 0;
        /*the quiz section*/
        var quiz = document.getElementById("QuizQuestions");
        var previousButton = document.getElementById("btnPrevious");
        var submitButton = document.getElementById("btnSubmit");
        var nextButton = document.getElementById("btnNext");
        /*in case the quiz is modified, I'm not going to assume the quiz is 25 questions.*/
        //var quizLength = json.questions.length;
        var quizLength = getQuizLength();
        /*variable to control the displayed question*/
        var quizIterator = 0;
        /*randomized quiz*/
        var quizData = newAttempt();
        /*makes sure the number used to navigate through the quiz isn't less than or greater than the number of questions available. Also makes sure the appropriate buttons are visible*/
        function quizIteratorValidator(int) {
            quizIterator += int;
            if (quizIterator < 0) {
                previousButton.style.visibility = 'hidden';
                quizIterator = 0;
            } else if (quizIterator > quizOrder.length) {
                nextButton.style.visibility = 'hidden';
                submitButton.style.visibility = "visible";
                quizIterator = quizLength - 1;
                updateQuestion(quizIterator);
            } else if (quizIterator == quizOrder.length - 1) {
                nextButton.style.visibility = 'hidden';
                submitButton.style.visibility = "visible";
                updateQuestion(quizIterator);
            }
            else {
                previousButton.style.visibility = "visible";
                nextButton.style.visibility = "visible";
                nextButton.disabled = true;          
                submitButton.style.visibility = "hidden";
                updateQuestion(quizIterator);
            }
        }
        /*submits the user's choice to the selectedAnswers array*/
        function choseAnswer(int) {
            selectedAnswers[quizIterator] = int;
            nextButton.disabled = false;
        }
        /*toggles the quiz's visibility*/
        function toggleQuiz() {
            let varQuizWrapper = document.getElementById("quizWrapper");
            /*ternary assignment <3*/
            varQuizWrapper.style.display = (varQuizWrapper.style.display != 'none' ? 'none' : '');
            if (firstTime == 0) {
                firstTime = 1;
                newAttempt();
                quizIteratorValidator(quizIterator);
            }
        }
        /*Updates the question visibile on the website. Uses questionIterator to navigate through the quiz.*/
        function updateQuestion(int) {
            /* "(quizIterator + 1).toString()" takes the quizIterator ( a zero based number) and adds one*/
            /*json.questions[quizOrder[quizIterator]] => quizJson.questions because that's the string values for the quiz, and we use quizIterator as the nTh place of the quiz order.*/
            let questionCurrent = quizJson.questions[quizOrder[quizIterator]];
            quiz.innerHTML = "<strong>" + (quizIterator + 1).toString() + ". " + questionCurrent.question + "</strong></br>";
            /*making the multiple choice selections*/
            let choiceList = document.createElement("form");
            choiceList.setAttribute("id", "listOfChoices");
            /*choiceList.setAttribute("action","javascript:postAnswer(" + quizIterator +");")*/
            quiz.appendChild(choiceList);
            /*for each choice in a set of choices in the choiceOrder array*/
            for (let i in choiceOrder[quizIterator]) {
                /*skeletonRow is used fit within the boilerplate of skeleton.css*/
                let skeletonRow = document.createElement("div");
                skeletonRow.setAttribute("class", "row u-full-width");
                let labelNode = document.createElement("label");
                let node = document.createElement("input");
                node.setAttribute("type", "radio");
                node.setAttribute("name", "Q" + quizIterator);
                switch (choiceOrder[quizIterator][i]) {
                    case 1:
                        node.setAttribute("value", 1);
                        labelNode.setAttribute("onClick", "choseAnswer(1)");
                        if (selectedAnswers[quizIterator] == 1) { node.checked = true; nextButton.disabled = false; }
                        labelNode.innerText = questionCurrent.wrong[0];
                        break;
                    case 2:
                        node.setAttribute("value", 2);
                        labelNode.setAttribute("onClick", "choseAnswer(2)");
                        if (selectedAnswers[quizIterator] == 2) { node.checked = true; nextButton.disabled = false; }
                        labelNode.innerText = questionCurrent.wrong[1];
                        break;
                    case 3:
                        node.setAttribute("value", 3);
                        labelNode.setAttribute("onClick", "choseAnswer(3)");
                        if (selectedAnswers[quizIterator] == 3) { node.checked = true; nextButton.disabled = false; }
                        labelNode.innerText = questionCurrent.wrong[2];
                        break;
                    case 4:
                        node.setAttribute("value", 4);
                        labelNode.setAttribute("onClick", "choseAnswer(4)");
                        if (selectedAnswers[quizIterator] == 4) { node.checked = true; nextButton.disabled = false; }
                        labelNode.innerText = questionCurrent.right;
                        break;
                    /*error*/
                    default:
                        let notification = new NotificationFx({
                            wrapper: document.body,
                            message: '<div class="ns-thumb"><img class="u-max-full-width"src="http://placehold.it/62"></div><div class="ns-content"><p>oh dear</p></div>',
                            layout: 'other',
                            effect: 'thumbslider',
                            type: 'error',
                            ttl: 5000,
                            onClose: function () { return false; },
                            onOpen: function () { return false; }
                        });
                        notification.show();
                        console.log("oh dear " + i);
                }
                choiceList.appendChild(skeletonRow);
                skeletonRow.appendChild(labelNode);
                labelNode.appendChild(node);
            }
        }
        function validateAndSubmit() {
            /*<img class="u-max-full-width" src="./!.png">*/
            if (selectedAnswers.includes(0)) {
                let notification = new NotificationFx({
                    wrapper: document.body,
                    message: '<div onclick="quizIteratorValidator(-' + (quizIterator - selectedAnswers.indexOf(0)) + ')" class="ns-thumb"><i style ="color:palevioletred;" class="fa fa-arrow-circle-o-down fa-3x" aria-hidden="true"></i></div><div class="ns-content"><p>Click here to go to the first missed question</p></div>',
                    layout: 'other',
                    effect: 'thumbslider',
                    type: 'error',
                    ttl: 10000,
                    onClose: function () { submitButton.disabled = false; },
                    onOpen: function () { submitButton.disabled = true; }
                });
                notification.show();
                /*console.log("quiz not complete");*/
            } else {
                let rightAnswers = selectedAnswers.reduce(function (n, val) { return n + (val === 4); }, 0);
                let notification = new NotificationFx({
                    wrapper: document.body,
                    message: '<div class="ns-thumb"><i style ="color:#33C3F0;" class="fa fa-hand-o-right fa-3x" aria-hidden="true"></i></div><div class="ns-content"><p>you got a ' + (rightAnswers / quizLength * 100) + '% grade</p></div>',
                    layout: 'other',
                    effect: 'thumbslider',
                    type: 'error',
                    ttl: 9000,
                    onClose: function () { submitButton.disabled = false; },
                    onOpen: function () { submitButton.disabled = true; }
                });
                notification.show();
                console.log("you got a " + (rightAnswers / quizLength * 100));
            }
        }
        /*note to self
        --in regards to the question list:
        <ul>
            <li>List item one</li>
            <li>List item two with subitems:
                <ul>
                    <li>Subitem 1</li>
                    <li>Subitem 2</li>
                </ul>
            </li>
            <li>Final list item</li>
        </ul>

        */
    </script>
</body>
</html>